{"remainingRequest":"/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/nihongo/lineGame/src/components/kana/rank/rank.vue?vue&type=style&index=0&id=b6e7268e&scoped=true&lang=css&","dependencies":[{"path":"/usr/local/var/www/nihongo/lineGame/src/components/kana/rank/rank.vue","mtime":1624502243584},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.rank {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 10px;\n}\n\nh2 {\n  text-align: center;\n  color: #333;\n}\n\n.rank-container {\n  color: #333;\n}\n\n.rank-container th {\n  font-weight: initial;\n  padding-bottom: 3px;\n}\n\n.rank-container > thead > tr > th:nth-of-type(n+2) {\n  text-align: left;\n  text-indent: 2ch;\n}\n\n.rank-container > tbody > tr > td {\n  padding: 5px 0 3px;\n}\n\n.rank-container > tbody > tr > td:nth-of-type(1) {\n  text-align: center;\n}\n\n.rank-container > tbody > tr > td:nth-of-type(n+2) {\n  text-indent: 2ch;\n}\n\n.rank-container {\n  border-collapse: collapse;\n}\n\n.rank-container > thead > tr {\n  border-bottom: 1px solid rgba(255, 255, 255, .8);\n}\n\n.rank-container > tbody > tr.active {\n  background: rgba(255, 255, 255, .3);\n}\n\n",{"version":3,"sources":["rank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"rank.vue","sourceRoot":"src/components/kana/rank","sourcesContent":["<template>\n  <blur :blurSrc=\"blurSrc\" :blurValue=\"30\">\n    <div class=\"rank\">\n      <h2>排行榜</h2>\n      <table class=\"rank-container\">\n        <thead>\n        <tr>\n          <th width=\"16%\">名次</th>\n          <th>昵称</th>\n          <th>分数</th>\n          <th>时间</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"(item, key) in ranks\" :key=\"key\" :class=\"{active:key===playerId}\">\n          <td><span>{{ put0(item.place) }}</span></td>\n          <td><span>{{item.name}}</span></td>\n          <td><span>{{item.score}}</span></td>\n          <td><span>{{item.time}}</span></td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </blur>\n</template>\n\n<script>\n  import Blur from '../../blur/blur';\n\n  export default {\n    name: \"rank\",\n    props: {\n      blurSrc: {\n        type: String\n      },\n      score: {\n        type: Number,\n      },\n      time: {\n        type: Number,\n      }\n    },\n    data() {\n      return {\n        ranksTemplate: [\n          {\n            name: 'kiryuu',\n            score: 330,\n            time: 363\n          },\n          {\n            name: 'akiyama',\n            score: 300,\n            time: 396\n          },\n          {\n            name: 'kasei',\n            score: 300,\n            time: 600\n          },\n        ],\n        ranks: [],\n        player: null,\n        playerId: null,\n      }\n    },\n    components: {\n      Blur\n    },\n    mounted() {\n      let user = JSON.parse(localStorage.getItem('nihongo'));\n      this.ranks = this.getRankStorage();\n      this.player = {\n        name: user.name,\n        score: this.score,\n        time: this.time\n      };\n\n      let i = 0;\n      for (i; i < this.ranks.length; i++) {\n        let rank = this.ranks[i];\n        if (this.player.score > rank.score || (this.player.score === rank.score && this.player.time <= rank.time)) {\n          this.playerId = i;\n          break;\n        }\n      }\n      if (this.playerId === null) this.playerId = i;\n\n      this.ranks.splice(this.playerId, 0, this.player);\n\n      this.setRankStorage();\n\n      let position = 0;\n      this.ranks.forEach((v, k) => {\n        let pre = null;\n        if (k > 0) {\n          pre = this.ranks[k - 1];\n        }\n        if (pre) {\n          if (pre.score > v.score || (pre.score === v.score && pre.time < v.time)) {\n            position++;\n          }\n        } else {\n          position++;\n        }\n\n        this.ranks[k].place = position;\n      });\n\n      this.$emit('gameInit');\n    },\n    computed: {\n      put0() {\n        return (num) => {\n          return num < 10 ? '0' + num : num;\n        }\n      }\n    },\n    methods: {\n      getRankStorage() {\n        let kanaRankStorage = JSON.parse(localStorage.getItem('kana_rank_storage'));\n        kanaRankStorage = kanaRankStorage ? kanaRankStorage : this.ranksTemplate;\n        return kanaRankStorage\n      },\n      setRankStorage() {\n        localStorage.setItem('kana_rank_storage', JSON.stringify(this.ranks));\n      }\n    }\n\n  }\n</script>\n\n<style scoped>\n  .rank {\n    display: flex;\n    flex-direction: column;\n    padding: 20px 10px;\n  }\n\n  h2 {\n    text-align: center;\n    color: #333;\n  }\n\n  .rank-container {\n    color: #333;\n  }\n\n  .rank-container th {\n    font-weight: initial;\n    padding-bottom: 3px;\n  }\n\n  .rank-container > thead > tr > th:nth-of-type(n+2) {\n    text-align: left;\n    text-indent: 2ch;\n  }\n\n  .rank-container > tbody > tr > td {\n    padding: 5px 0 3px;\n  }\n\n  .rank-container > tbody > tr > td:nth-of-type(1) {\n    text-align: center;\n  }\n\n  .rank-container > tbody > tr > td:nth-of-type(n+2) {\n    text-indent: 2ch;\n  }\n\n  .rank-container {\n    border-collapse: collapse;\n  }\n\n  .rank-container > thead > tr {\n    border-bottom: 1px solid rgba(255, 255, 255, .8);\n  }\n\n  .rank-container > tbody > tr.active {\n    background: rgba(255, 255, 255, .3);\n  }\n\n</style>"]}]}