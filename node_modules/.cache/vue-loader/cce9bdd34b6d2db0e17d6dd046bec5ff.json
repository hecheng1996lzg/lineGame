{"remainingRequest":"/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/nihongo/lineGame/src/components/word/word.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/nihongo/lineGame/src/components/word/word.vue","mtime":1549967944213},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ProgressBar from '../progress-bar/progress-bar';\nimport blur from '../blur/blur';\nimport {getCourseList} from '../../api/course';\n\nexport default {\n  name: \"word\",\n  data() {\n    return {\n      imgBase64: '',\n      blurFlag: false,\n      courses: [],\n      selectCourses: new Map(),   //当前选中的课程列表\n      selectCourseMax: 3,        //最多选择3门课\n      selectText: ''\n    }\n  },\n  mounted() {\n    getCourseList().then((res) => {\n      this.courses = res.data.data;\n    });\n  },\n  computed: {\n    bgImg() {\n      let user = JSON.parse(localStorage.getItem('nihongo'));\n      return user.bgImg;\n    }\n  },\n  methods: {\n    setBlurImg(base64) {\n      this.$refs.blur.forEach((item) => {\n        item.setBase64(base64);\n      })\n    },\n    selectCourse(course) {\n      let state = !course.isActive;\n      if (this.selectCourses.size >= 3 && state) return false;\n      if (state) {\n        this.selectCourses.set(course.id, course.name);\n      } else {\n        this.selectCourses.delete(course.id);\n      }\n      this.$set(course, 'isActive', state);\n      this.updateSelectText();\n    },\n    updateSelectText() {\n      let list = '';\n      this.selectCourses.forEach((v) => {\n        list += (v + '，');\n      });\n      list = list.replace(/，$/, '。');\n      if (this.selectCourses.size >= 3) list += '（已满）';\n      this.selectText = list;\n    },\n    start() {\n      if(this.selectCourses.length)return false;\n      this.$router.push({ name: 'word-list', params: { selectCourses:JSON.stringify(this.selectCourses)}});\n    }\n  },\n  components: {\n    ProgressBar,\n    blur\n  }\n}\n",{"version":3,"sources":["word.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"word.vue","sourceRoot":"src/components/word","sourcesContent":["<template>\n  <div class=\"blur-bg\" :style=\"{backgroundImage: 'url(' + bgImg + ')'}\">\n    <article>\n      <ul class=\"word-list\">\n        <li v-for=\"(course,index) in courses\" :class=\"{ active: course.isActive }\" @click=\"selectCourse(course)\"\n            :key=\"index\">\n          <blur class=\"word-list-item\" :blur-src=\"bgImg\" @setBlurImg=\"setBlurImg\" ref=\"blur\">\n            <div class=\"word-list-item-content\">\n              <div class=\"check\">\n                <div></div>\n              </div>\n              <progress-bar class=\"progress-bar\" :value=\"21\" :max=\"70\" :color=\"'#02a6e4'\">{{course.name}}</progress-bar>\n            </div>\n          </blur>\n        </li>\n      </ul>\n    </article>\n    <transition name=\"slide\">\n      <div class=\"word-confirm\" v-if=\"selectCourses.size\">\n        <span class=\"mi\">已选择{{selectText}}</span>\n        <button type=\"button\" class=\"sm bg-color-blue\" @click=\"start\">开始</button>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n  import ProgressBar from '../progress-bar/progress-bar';\n  import blur from '../blur/blur';\n  import {getCourseList} from '../../api/course';\n\n  export default {\n    name: \"word\",\n    data() {\n      return {\n        imgBase64: '',\n        blurFlag: false,\n        courses: [],\n        selectCourses: new Map(),   //当前选中的课程列表\n        selectCourseMax: 3,        //最多选择3门课\n        selectText: ''\n      }\n    },\n    mounted() {\n      getCourseList().then((res) => {\n        this.courses = res.data.data;\n      });\n    },\n    computed: {\n      bgImg() {\n        let user = JSON.parse(localStorage.getItem('nihongo'));\n        return user.bgImg;\n      }\n    },\n    methods: {\n      setBlurImg(base64) {\n        this.$refs.blur.forEach((item) => {\n          item.setBase64(base64);\n        })\n      },\n      selectCourse(course) {\n        let state = !course.isActive;\n        if (this.selectCourses.size >= 3 && state) return false;\n        if (state) {\n          this.selectCourses.set(course.id, course.name);\n        } else {\n          this.selectCourses.delete(course.id);\n        }\n        this.$set(course, 'isActive', state);\n        this.updateSelectText();\n      },\n      updateSelectText() {\n        let list = '';\n        this.selectCourses.forEach((v) => {\n          list += (v + '，');\n        });\n        list = list.replace(/，$/, '。');\n        if (this.selectCourses.size >= 3) list += '（已满）';\n        this.selectText = list;\n      },\n      start() {\n        if(this.selectCourses.length)return false;\n        this.$router.push({ name: 'word-list', params: { selectCourses:JSON.stringify(this.selectCourses)}});\n      }\n    },\n    components: {\n      ProgressBar,\n      blur\n    }\n  }\n</script>\n\n<style scoped>\n  article {\n    margin: 30px 10px 90px;\n  }\n\n  .word-list > li {\n    margin: 15px 0;\n    color: #333\n  }\n\n  .word-list-item-content {\n    display: flex;\n  }\n\n  .progress-bar {\n    flex: 1;\n    margin: 15px 13px\n  }\n\n  .check {\n    width: 10px;\n    border-radius: 10px 0 0 10px;\n    background: rgba(255, 255, 255, 0.2);\n  }\n\n  .active .check {\n    background: rgba(2, 166, 226, 0.6);\n    box-shadow: 3px 0 13px rgba(2, 166, 226, 0.5);\n    transition: all 0.5s ease;\n  }\n\n  .word-confirm {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 50px;\n    padding: 0 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    transform: translateY(0%);\n    background: rgba(255, 255, 255, .9);\n  }\n\n  .slide-enter-active, .slide-leave-active {\n    transition: transform .5s;\n  }\n\n  .slide-enter, .slide-leave-to /* .fade-leave-active below version 2.1.8 */\n  {\n    transform: translateY(100%);\n  }\n</style>"]}]}