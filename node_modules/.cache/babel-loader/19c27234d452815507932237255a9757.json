{"remainingRequest":"/usr/local/var/www/nihongo/lineGame/node_modules/babel-loader/lib/index.js!/usr/local/var/www/nihongo/lineGame/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/nihongo/lineGame/src/components/word/word.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/nihongo/lineGame/src/components/word/word.vue","mtime":1549967944213},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/nihongo/lineGame/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/usr/local/var/www/nihongo/lineGame/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _Map from \"/usr/local/var/www/nihongo/lineGame/node_modules/@babel/runtime-corejs2/core-js/map\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ProgressBar from '../progress-bar/progress-bar';\nimport blur from '../blur/blur';\nimport { getCourseList } from '../../api/course';\nexport default {\n  name: \"word\",\n  data: function data() {\n    return {\n      imgBase64: '',\n      blurFlag: false,\n      courses: [],\n      selectCourses: new _Map(),\n      //当前选中的课程列表\n      selectCourseMax: 3,\n      //最多选择3门课\n      selectText: ''\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    getCourseList().then(function (res) {\n      _this.courses = res.data.data;\n    });\n  },\n  computed: {\n    bgImg: function bgImg() {\n      var user = JSON.parse(localStorage.getItem('nihongo'));\n      return user.bgImg;\n    }\n  },\n  methods: {\n    setBlurImg: function setBlurImg(base64) {\n      this.$refs.blur.forEach(function (item) {\n        item.setBase64(base64);\n      });\n    },\n    selectCourse: function selectCourse(course) {\n      var state = !course.isActive;\n      if (this.selectCourses.size >= 3 && state) return false;\n\n      if (state) {\n        this.selectCourses.set(course.id, course.name);\n      } else {\n        this.selectCourses.delete(course.id);\n      }\n\n      this.$set(course, 'isActive', state);\n      this.updateSelectText();\n    },\n    updateSelectText: function updateSelectText() {\n      var list = '';\n      this.selectCourses.forEach(function (v) {\n        list += v + '，';\n      });\n      list = list.replace(/，$/, '。');\n      if (this.selectCourses.size >= 3) list += '（已满）';\n      this.selectText = list;\n    },\n    start: function start() {\n      if (this.selectCourses.length) return false;\n      this.$router.push({\n        name: 'word-list',\n        params: {\n          selectCourses: _JSON$stringify(this.selectCourses)\n        }\n      });\n    }\n  },\n  components: {\n    ProgressBar: ProgressBar,\n    blur: blur\n  }\n};",{"version":3,"sources":["word.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,WAAA,MAAA,8BAAA;AACA,OAAA,IAAA,MAAA,cAAA;AACA,SAAA,aAAA,QAAA,kBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,aAAA,EAAA,UAJA;AAIA;AACA,MAAA,eAAA,EAAA,CALA;AAKA;AACA,MAAA,UAAA,EAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,OAZA,qBAYA;AAAA;;AACA,IAAA,aAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAFA;AAGA,GAhBA;AAiBA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;AACA,aAAA,IAAA,CAAA,KAAA;AACA;AAJA,GAjBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,MADA,EACA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,SAAA,CAAA,MAAA;AACA,OAFA;AAGA,KALA;AAMA,IAAA,YANA,wBAMA,MANA,EAMA;AACA,UAAA,KAAA,GAAA,CAAA,MAAA,CAAA,QAAA;AACA,UAAA,KAAA,aAAA,CAAA,IAAA,IAAA,CAAA,IAAA,KAAA,EAAA,OAAA,KAAA;;AACA,UAAA,KAAA,EAAA;AACA,aAAA,aAAA,CAAA,GAAA,CAAA,MAAA,CAAA,EAAA,EAAA,MAAA,CAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,aAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA;;AACA,WAAA,IAAA,CAAA,MAAA,EAAA,UAAA,EAAA,KAAA;AACA,WAAA,gBAAA;AACA,KAhBA;AAiBA,IAAA,gBAjBA,8BAiBA;AACA,UAAA,IAAA,GAAA,EAAA;AACA,WAAA,aAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,IAAA,IAAA,CAAA,GAAA,GAAA;AACA,OAFA;AAGA,MAAA,IAAA,GAAA,IAAA,CAAA,OAAA,CAAA,IAAA,EAAA,GAAA,CAAA;AACA,UAAA,KAAA,aAAA,CAAA,IAAA,IAAA,CAAA,EAAA,IAAA,IAAA,MAAA;AACA,WAAA,UAAA,GAAA,IAAA;AACA,KAzBA;AA0BA,IAAA,KA1BA,mBA0BA;AACA,UAAA,KAAA,aAAA,CAAA,MAAA,EAAA,OAAA,KAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,WAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,aAAA,EAAA,gBAAA,KAAA,aAAA;AAAA;AAAA,OAAA;AACA;AA7BA,GAvBA;AAsDA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA,WADA;AAEA,IAAA,IAAA,EAAA;AAFA;AAtDA,CAAA","sourcesContent":["<template>\n  <div class=\"blur-bg\" :style=\"{backgroundImage: 'url(' + bgImg + ')'}\">\n    <article>\n      <ul class=\"word-list\">\n        <li v-for=\"(course,index) in courses\" :class=\"{ active: course.isActive }\" @click=\"selectCourse(course)\"\n            :key=\"index\">\n          <blur class=\"word-list-item\" :blur-src=\"bgImg\" @setBlurImg=\"setBlurImg\" ref=\"blur\">\n            <div class=\"word-list-item-content\">\n              <div class=\"check\">\n                <div></div>\n              </div>\n              <progress-bar class=\"progress-bar\" :value=\"21\" :max=\"70\" :color=\"'#02a6e4'\">{{course.name}}</progress-bar>\n            </div>\n          </blur>\n        </li>\n      </ul>\n    </article>\n    <transition name=\"slide\">\n      <div class=\"word-confirm\" v-if=\"selectCourses.size\">\n        <span class=\"mi\">已选择{{selectText}}</span>\n        <button type=\"button\" class=\"sm bg-color-blue\" @click=\"start\">开始</button>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n  import ProgressBar from '../progress-bar/progress-bar';\n  import blur from '../blur/blur';\n  import {getCourseList} from '../../api/course';\n\n  export default {\n    name: \"word\",\n    data() {\n      return {\n        imgBase64: '',\n        blurFlag: false,\n        courses: [],\n        selectCourses: new Map(),   //当前选中的课程列表\n        selectCourseMax: 3,        //最多选择3门课\n        selectText: ''\n      }\n    },\n    mounted() {\n      getCourseList().then((res) => {\n        this.courses = res.data.data;\n      });\n    },\n    computed: {\n      bgImg() {\n        let user = JSON.parse(localStorage.getItem('nihongo'));\n        return user.bgImg;\n      }\n    },\n    methods: {\n      setBlurImg(base64) {\n        this.$refs.blur.forEach((item) => {\n          item.setBase64(base64);\n        })\n      },\n      selectCourse(course) {\n        let state = !course.isActive;\n        if (this.selectCourses.size >= 3 && state) return false;\n        if (state) {\n          this.selectCourses.set(course.id, course.name);\n        } else {\n          this.selectCourses.delete(course.id);\n        }\n        this.$set(course, 'isActive', state);\n        this.updateSelectText();\n      },\n      updateSelectText() {\n        let list = '';\n        this.selectCourses.forEach((v) => {\n          list += (v + '，');\n        });\n        list = list.replace(/，$/, '。');\n        if (this.selectCourses.size >= 3) list += '（已满）';\n        this.selectText = list;\n      },\n      start() {\n        if(this.selectCourses.length)return false;\n        this.$router.push({ name: 'word-list', params: { selectCourses:JSON.stringify(this.selectCourses)}});\n      }\n    },\n    components: {\n      ProgressBar,\n      blur\n    }\n  }\n</script>\n\n<style scoped>\n  article {\n    margin: 30px 10px 90px;\n  }\n\n  .word-list > li {\n    margin: 15px 0;\n    color: #333\n  }\n\n  .word-list-item-content {\n    display: flex;\n  }\n\n  .progress-bar {\n    flex: 1;\n    margin: 15px 13px\n  }\n\n  .check {\n    width: 10px;\n    border-radius: 10px 0 0 10px;\n    background: rgba(255, 255, 255, 0.2);\n  }\n\n  .active .check {\n    background: rgba(2, 166, 226, 0.6);\n    box-shadow: 3px 0 13px rgba(2, 166, 226, 0.5);\n    transition: all 0.5s ease;\n  }\n\n  .word-confirm {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 50px;\n    padding: 0 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    transform: translateY(0%);\n    background: rgba(255, 255, 255, .9);\n  }\n\n  .slide-enter-active, .slide-leave-active {\n    transition: transform .5s;\n  }\n\n  .slide-enter, .slide-leave-to /* .fade-leave-active below version 2.1.8 */\n  {\n    transform: translateY(100%);\n  }\n</style>"],"sourceRoot":"src/components/word"}]}