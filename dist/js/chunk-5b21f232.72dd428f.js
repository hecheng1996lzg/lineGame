(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b21f232"],{"0b58":function(t,e,n){"use strict";var a=n("e4ea"),i=n.n(a);i.a},"1e88":function(t,e,n){"use strict";var a=n("d8b7"),i=n.n(a);i.a},"28a5":function(t,e,n){"use strict";var a=n("aae3"),i=n("cb7c"),r=n("ebd6"),s=n("0390"),c=n("9def"),o=n("5f1b"),u=n("520a"),l=n("79e5"),d=Math.min,f=[].push,h="split",p="length",v="lastIndex",g=4294967295,m=!l(function(){RegExp(g,"y")});n("214f")("split",2,function(t,e,n,l){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!a(t))return n.call(i,t,e);var r,s,c,o=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,h=void 0===e?g:e>>>0,m=new RegExp(t.source,l+"g");while(r=u.call(m,i)){if(s=m[v],s>d&&(o.push(i.slice(d,r.index)),r[p]>1&&r.index<i[p]&&f.apply(o,r.slice(1)),c=r[0][p],d=s,o[p]>=h))break;m[v]===r.index&&m[v]++}return d===i[p]?!c&&m.test("")||o.push(""):o.push(i.slice(d)),o[p]>h?o.slice(0,h):o}:"0"[h](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,a){var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i,a):b.call(String(i),n,a)},function(t,e){var a=l(b,t,this,e,b!==n);if(a.done)return a.value;var u=i(t),f=String(this),h=r(u,RegExp),p=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),x=new h(m?u:"^(?:"+u.source+")",v),w=void 0===e?g:e>>>0;if(0===w)return[];if(0===f.length)return null===o(x,f)?[f]:[];var I=0,C=0,S=[];while(C<f.length){x.lastIndex=m?C:0;var y,_=o(x,m?f:f.slice(C));if(null===_||(y=d(c(x.lastIndex+(m?0:C)),f.length))===I)C=s(f,C,p);else{if(S.push(f.slice(I,C)),S.length===w)return S;for(var D=1;D<=_.length-1;D++)if(S.push(_[D]),S.length===w)return S;C=I=y}}return S.push(f.slice(I)),S}]})},"355d":function(t,e){e.f={}.propertyIsEnumerable},"46ce":function(t,e,n){"use strict";var a=n("60da"),i=n.n(a);i.a},5176:function(t,e,n){t.exports=n("51b6")},"51b6":function(t,e,n){n("a3c3"),t.exports=n("584a").Object.assign},"60da":function(t,e,n){},9306:function(t,e,n){"use strict";var a=n("c3a1"),i=n("9aa9"),r=n("355d"),s=n("241e"),c=n("335c"),o=Object.assign;t.exports=!o||n("294c")(function(){var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach(function(t){e[t]=t}),7!=o({},t)[n]||Object.keys(o({},e)).join("")!=a})?function(t,e){var n=s(t),o=arguments.length,u=1,l=i.f,d=r.f;while(o>u){var f,h=c(arguments[u++]),p=l?a(h).concat(l(h)):a(h),v=p.length,g=0;while(v>g)d.call(h,f=p[g++])&&(n[f]=h[f])}return n}:o},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},a3c3:function(t,e,n){var a=n("63b6");a(a.S+a.F,"Object",{assign:n("9306")})},aae3:function(t,e,n){var a=n("d3f4"),i=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},c3d0:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"word-list"},[n("simple-progress-bar",{staticClass:"simple-progress-bar",attrs:{value:t.rightNum,max:t.cards.length}}),n("card",{staticClass:"card",attrs:{cards:t.cards},on:{right:t.right}})],1)},i=[],r=n("f499"),s=n.n(r),c=(n("ac6a"),n("2d7d")),o=n.n(c),u=(n("cadf"),n("551c"),n("097d"),n("cabd")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cards"},[n("div",{staticClass:"bg-blur"},t._l(t.cardList,function(e,a){return n("canvas",{directives:[{name:"show",rawName:"v-show",value:a===t.activeIndex,expression:"index===activeIndex"}],key:a,ref:"blurCanvas",refInFor:!0})}),0),n("ul",{staticClass:"card-list"},t._l(t.cardList,function(e,a){return n("li",{key:a,ref:"cards",refInFor:!0,staticClass:"card-item",class:{past:t.pastCard(a),prev:t.prevCard(a),active:t.activeCard(a),next:t.nextCard(a),future:t.futureCard(a)},on:{click:function(e){t.cardToggle(e,a)}}},[n("div",{staticClass:"enter"},[n("form",{on:{submit:function(n){n.preventDefault(),t.cardSubmit(e,a)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.enter,expression:"item.enter"}],staticClass:"bl input",attrs:{disabled:e.isDisable,type:"text",required:"",placeholder:"Enter here"},domProps:{value:e.enter},on:{input:function(n){n.target.composing||t.$set(e,"enter",n.target.value)}}})])]),n("div",{staticClass:"content"},[e.enterState?n("div",{staticClass:"answer"},[n("span",{staticClass:"iconfont",class:{"icon-tianjiashibai":2===e.enterState,"icon-tianjiachenggong":1===e.enterState}}),n("div",{staticClass:" info"},[n("span",[t._v(t._s(e.note))]),n("h2",[t._v(t._s(e.answer))])])]):t._e(),n("img",{ref:"cardImg",refInFor:!0,attrs:{src:"",alt:""}})]),n("div",{staticClass:"tips",class:{tipsShow:t.tipsShow}},[n("div",[t._v(t._s(e.tips))]),n("span",{staticClass:"iconfont",class:{"icon-eye1":t.tipsShow,"icon-eye":!t.tipsShow},on:{click:function(e){t.showTips()}}})])])}),0)])},d=[],f=n("5176"),h=n.n(f),p=(n("28a5"),n("5e9e")),v=3,g={name:"card",props:{cards:{type:Array,default:function(){return[]}}},data:function(){return{cardList:this.cards,activeIndex:0,tipsShow:!1}},watch:{cards:function(){for(var t=0;t<v;t++)this.cardImgLoad(t,this.cards[t].parentId,this.cards[t].imgUrl)},activeIndex:function(){var t=v+this.activeIndex-1;t>=this.cards.length||this.cardImgLoad(t,this.cards[t].parentId,this.cards[t].imgUrl)}},computed:{pastCard:function(){var t=this;return function(e){return e<=t.activeIndex-2}},prevCard:function(){var t=this;return function(e){return e===t.activeIndex-1}},activeCard:function(){var t=this;return function(e){return e===t.activeIndex}},nextCard:function(){var t=this;return function(e){return e===t.activeIndex+1}},futureCard:function(){var t=this;return function(e){return e>=t.activeIndex+2}}},methods:{cardToggle:function(t,e){e>this.activeIndex?this.activeIndex++:e<this.activeIndex&&this.activeIndex--},showTips:function(){this.tipsShow=!this.tipsShow},cardImgLoad:function(t,e,n){var a=this;this.$nextTick(function(){var i=a.$refs.cardImg[t],r=a.$refs.blurCanvas[t];r.style.width&&r.style.height||(i.crossOrigin="",i.onload=function(){r.width=i.width,r.height=i.height,p["a"](i,r,50),r.style.width="100%",r.style.height="100%"},i.src="".concat("http://localhost/nihongo/server/public/imgsys","/courses/").concat(e,"/").concat(n))})},cardSubmit:function(t,e){var n=this;if(!t.isDisable){var a=t.answer?t.answer:t.note;if(a=a.split("|"),-1!==a.indexOf(t.enter))t.enterState=1,this.$emit("right",t);else{var i=h()({},t);i.enter="",t.enterState=2,this.cards.splice(v+e,0,i)}t.isDisable=!0;var r=this.activeIndex;window.setTimeout(function(){r===n.activeIndex&&(n.activeIndex++,window.setTimeout(function(){n.$refs.cards[n.activeIndex].getElementsByClassName("input")[0].focus()},200))},1e3)}}}},m=g,b=(n("0b58"),n("2877")),x=Object(b["a"])(m,l,d,!1,null,"0a4bb148",null),w=x.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"simple-progress-bar"},[n("div",{style:{background:t.color,width:t.percentage+"%"}})])},C=[],S=(n("c5f6"),{props:{value:{type:Number,default:0},max:{type:Number,default:0},color:{type:String,default:"rgb(51, 210, 145)"}},computed:{percentage:function(){return this.value/this.max*100}}}),y=S,_=(n("1e88"),Object(b["a"])(y,I,C,!1,null,"3af85bd2",null)),D=_.exports,k={props:{selectCourses:{type:String}},data:function(){return{cards:[],rightNum:0}},computed:{selectCoursesMap:function(){return new o.a(JSON.parse(this.selectCourses))}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("nihongo"));Object(u["b"])(this.selectCoursesMap).then(function(n){n.forEach(function(n){n.data.forEach(function(n){e&&e.courseData&&e.courseData[n.course_id]&&e.courseData[n.course_id].complete&&-1!==e.courseData[n.course_id].complete.indexOf(n.id)||t.cards.push({id:n.id,parentId:n.course_id,imgUrl:n.imgUrl,answer:n.kanji,tips:n.chinese,note:n.kana,enter:"",enterState:0})})})})},methods:{right:function(t){this.rightNum++,this.addRightWork(t.id,t.parentId)},addRightWork:function(t,e){var n=JSON.parse(localStorage.getItem("nihongo"));n&&!n.courseData&&(n.courseData={}),n.courseData[e]||(n.courseData[e]={state:0,date:new Date,complete:[]}),n&&n.courseData&&n.courseData[e]&&n.courseData[e].complete&&-1===n.courseData[e].complete.indexOf(t)&&(n.courseData[e].complete.push(t),console.log(1)),localStorage.setItem("nihongo",s()(n))}},components:{Card:w,SimpleProgressBar:D}},O=k,j=(n("46ce"),Object(b["a"])(O,a,i,!1,null,"1a610492",null));e["default"]=j.exports},d8b7:function(t,e,n){},e4ea:function(t,e,n){}}]);
//# sourceMappingURL=chunk-5b21f232.72dd428f.js.map